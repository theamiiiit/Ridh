:root{
  --bg: radial-gradient(circle at top, #ffd1dc, #ffb6c1);
  --env-bg: #fde6cf;
  --env-tab: #f8d4b0;
  --env-cover: #f2c39b;
  --shadow: rgba(0,0,0,.25);
  --text: #333;
  --heart: #ff2d75;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  height:100vh;
  background:var(--bg);
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'Segoe UI',sans-serif;
}

.container{
  display:grid;
  place-items:center;
}

.envelope-wrapper{
  position:relative;
  width:360px;
  height:280px;
  cursor:pointer;
  filter: drop-shadow(0 25px 40px var(--shadow));
}

/* ✅ IMPORTANT: remove overflow hidden from envelope */
.envelope{
  position:relative;
  width:100%;
  height:100%;
  background:var(--env-bg);
  border-radius:4px;
  overflow: visible; /* ✅ so letter can come outside */
}

/* flap */
.envelope::before{
  content:"";
  position:absolute;
  top:0;
  left:0;
  width:0;height:0;
  border-top:150px solid var(--env-tab);
  border-left:180px solid transparent;
  border-right:180px solid transparent;
  transform-origin: top;
  transition: transform .85s ease;
  z-index:6;
}

/* body */
.envelope::after{
  content:"";
  position:absolute;
  bottom:0;
  left:0;
  width:0;height:0;
  border-left:180px solid var(--env-cover);
  border-right:180px solid var(--env-cover);
  border-bottom:130px solid var(--env-cover);
  border-top:150px solid transparent;
  z-index:2;
}

/* ✅ LETTER (closed state inside) */
.letter{
  position:absolute;
  bottom:18px;
  left:50%;
  transform:translateX(-50%);
  width:78%;
  height:74%;
  background:white;
  padding:16px 14px;
  border-radius:10px;
  box-shadow:0 10px 20px rgba(0,0,0,.18);
  transition: all 1s cubic-bezier(.22,.61,.36,1);
  overflow:hidden; /* closed state */
  z-index:3;
}

/* ✅ Open state: FULL OPEN + SCROLL */
.flap .letter{
  bottom:180px; /* ✅ now letter fully comes out */
  height:260px; /* ✅ bigger letter */
  width:82%;
  overflow-y:auto; /* ✅ scroll will work */
  transform:translateX(-50%) scale(1.02);
}

/* text */
.text{
  font-size:12px;
  line-height:1.6;
  color:var(--text);
}

.text strong{
  display:block;
  font-size:14px;
  margin-bottom:10px;
}

/* ✅ Heart */
.heart{
  position:absolute;
  top:52%;
  left:50%;
  width:18px;
  height:18px;
  background:var(--heart);
  transform:translate(-50%,-50%) rotate(45deg);
  animation:pulse 1.2s infinite;
  z-index:10;
}

.heart::before,
.heart::after{
  content:"";
  position:absolute;
  width:18px;
  height:18px;
  background:var(--heart);
  border-radius:50%;
}

.heart::before{ top:-9px; left:0; }
.heart::after{ left:-9px; top:0; }

@keyframes pulse{
  0%{ transform:translate(-50%,-50%) scale(1) rotate(45deg); }
  50%{ transform:translate(-50%,-50%) scale(1.25) rotate(45deg); }
  100%{ transform:translate(-50%,-50%) scale(1) rotate(45deg); }
}

/* open flap */
.flap .envelope::before{
  transform: rotateX(180deg);
}

/* heart open */
.flap .heart{
  animation:none;
  transform:translate(-50%,-50%) rotate(90deg);
}

/* ✅ Smooth Scroll look */
.flap .letter::-webkit-scrollbar{
  width:6px;
}
.flap .letter::-webkit-scrollbar-thumb{
  background:#ff98b4;
  border-radius:10px;
}

/* responsive */
@media(max-width:420px){
  .envelope-wrapper{ width:310px; height:250px; }

  .envelope::before{
    border-top:130px solid var(--env-tab);
    border-left:155px solid transparent;
    border-right:155px solid transparent;
  }

  .envelope::after{
    border-left:155px solid var(--env-cover);
    border-right:155px solid var(--env-cover);
    border-bottom:120px solid var(--env-cover);
    border-top:130px solid transparent;
  }

  .flap .letter{
    bottom:160px;
    height:240px;
  }
}
